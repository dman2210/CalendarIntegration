<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="glass.css">
    <link rel="stylesheet" href="glassCal.css">
    <link rel="stylesheet" href="index.css">
    <script src="https://sandbox.web.squarecdn.com/v1/square.js"></script>

</head>

<body>
    <!-- <div id="loaderContainer" class="coverUp">
        <div class="loader"></div>
    </div> -->
    <div style="display:flex;align-items: center;justify-content: center;">
        <h1>
            Book Appointment
        </h1>
    </div>
    <div id="background">
        <div id="squareContainer" style="display:none">
            <form id="payment-form">
                <div id="card-container"></div>
                <button id="card-button" type="button">Pay $1.00</button>
            </form>
            <div id="payment-status-container"></div>
        </div>
        <script type="text/javascript" src="/squareIntegration.js"></script>
        <div id="main" style="display:flex;justify-content: center;flex-direction: column;">
            <div id="calendar" style="display:none; width:unset"></div>
            <div id="label" class="label">
                <h3 style="text-align: center;">
                    How often?
                </h3>
            </div>
            <div style="display:flex;justify-content: center;">
                <div style="display:flex;align-items: center;justify-content: center;flex-direction: column;">

                    <div id="buttons" style="display:flex; flex-direction: column;">
                        <script>
                            function checkDates(frequencyChoice) {
                                document.subOptions = { frequency: frequencyChoice };
                                //implement conflict checking
                                document.getElementById("calendar").style.display = "flex";
                                // document.getElementById("label").style.position = "unset";
                                document.getElementById("main").style.flexDirection = "unset";
                                let buttons = document.getElementById("buttons").children;
                                Array.from(buttons).forEach((button) => {
                                    if (button.id !== frequencyChoice) {
                                        button.style.display = "none";
                                    }
                                });
                                document.getElementById("label").innerText = "What Day?"
                                history.pushState({ page: "calendaropened", busyHours: hoursBusy }, "", "");
                                hoursAvailable = filterByFrequency(frequencyChoice);
                            }
                            let cleaningOptions = [
                                {
                                    frequency: "One Cleaning",
                                    price: 175,
                                    note: "2 Hours",
                                    short: "one",

                                },
                                {
                                    frequency: "Monthly",
                                    price: 175,
                                    note: "2 Hours",
                                    short: "monthly",
                                },
                                {
                                    frequency: "Weekly",
                                    price: 175,
                                    note: "2 Hours",
                                    short: "weekly"
                                },
                                {
                                    frequency: "Bi-Weekly",
                                    price: 175,
                                    note: "2 Hours",
                                    short: "biweekly"
                                }
                            ]
                            let buttons = cleaningOptions.map((option) => {
                                return (
                                    `<button class="buttonAdapt" id="${option.short}" onClick=checkDates("${option.short}")>
                                    <div>
                                    <div style="display:flex;align-items: flex-start; flex-direction:column;margin-right:10vw; padding:5px">
                                        <div class="buttonItem">
                                            <h4 style="display:flex">
                                                ${option.frequency} - ${option.note}
                                            </h4>
                                        </div>
                                        <div class="buttonItem">
                                            <p>
                                                $${option.price.toString()}.00
                                            </p>
                                        </div>
                                    </div>
                                    </div>
                                </button>`)
                            })
                            document.getElementById("buttons").innerHTML = buttons;
                        </script>
                    </div>
                    <div id="hoursWrapper" style="display:none">
                        <button id="hours" class="buttonAdapt">

                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type='text/javascript' src='./calendar.js'></script>
    <script>
        history.pushState({ page: "original" }, "", "")
    </script>
    <script type='text/javascript' src='./state.js'></script>
</body>

</html>