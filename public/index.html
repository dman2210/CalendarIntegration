<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="glass.css">
    <link rel="stylesheet" href="glassCal.css">
    <link rel="stylesheet" href="index.css">
    <script src="https://sandbox.web.squarecdn.com/v1/square.js"></script>

</head>

<body>
    <div id="loaderContainer" class="coverUp">
        <div class="loader"></div>
    </div>
    <div style="display:flex;align-items: center;justify-content: center;">
        <h1>
            Book Appointment
        </h1>
    </div>
    <div id="background">
        <div id="squareContainer" style="display:none">
            <form id="payment-form">
                <div id="card-container"></div>
                <button id="card-button" type="button">Pay $1.00</button>
            </form>
            <div id="payment-status-container"></div>
        </div>
        <script type="text/javascript" src="/squareIntegration.js"></script>
        <div id="main" style="display:flex;justify-content: center;flex-direction: column;
        margin-left: auto;
        padding: 30px 130px;
        margin-right: auto;
        box-sizing: border-box;
        max-width: 1300px;">
            <div class="content">
                <div id="label" class="label">
                    <h3 class="statusItem activeStatus">
                        Select service
                    </h3>
                    <h3 class="statusItem">
                        Select date and time
                    </h3>
                    <h3 class="statusItem">
                        Enter your details
                    </h3>
                    <h3 class="statusItem">
                        Make your payment
                    </h3>
                </div>
                <div id="calendar" style="display:none; width:unset"></div>


                <div class="buttonsContainer">
                    <h2 id="title" class="title">Select a service</h4>
                        <div id="buttons" style="display:flex; flex-direction: column;width:100%">
                            <button class="buttonAdapt" id="monthly" style="margin-top:0px" onclick="checkDates('one')">
                                <div>
                                    <div
                                        style="display:flex;align-items: flex-start; flex-direction:column;margin-right:10vw;">
                                        <div class="buttonItem serviceTitle">
                                            <h4 style="display:flex">
                                                One Cleaning
                                            </h4>
                                        </div>
                                        <div class="buttonItem">
                                            <p>
                                                $175.00 路 2 Hours
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </button><button class="buttonAdapt" id="monthly" onclick="checkDates('monthly')">
                                <div>
                                    <div
                                        style="display:flex;align-items: flex-start; flex-direction:column;margin-right:10vw;">
                                        <div class="buttonItem serviceTitle">
                                            <h4 style="display:flex">
                                                Monthly
                                            </h4>
                                        </div>
                                        <div class="buttonItem">
                                            <p>
                                                $175.00 路 2 Hours
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </button><button class="buttonAdapt" id="weekly" onclick="checkDates('weekly')">
                                <div>
                                    <div
                                        style="display:flex;align-items: flex-start; flex-direction:column;margin-right:10vw;">
                                        <div class="buttonItem serviceTitle">
                                            <h4 style="display:flex">
                                                Weekly
                                            </h4>
                                        </div>
                                        <div class="buttonItem">
                                            <p>
                                                $175.00 路 2 Hours
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </button><button class="buttonAdapt" id="biweekly" onclick="checkDates('biweekly')">
                                <div>
                                    <div
                                        style="display:flex;align-items: flex-start; flex-direction:column;margin-right:10vw;">
                                        <div class="buttonItem serviceTitle">
                                            <h4 style="display:flex">
                                                Bi-Weekly
                                            </h4>
                                        </div>
                                        <div class="buttonItem">
                                            <p>
                                                $175.00 路 2 Hours
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </button>
                            <script>
                                var hoursAvailable;
                                function checkDates(frequencyChoice) {
                                    document.getElementById("loaderContainer").style.display = "flex"
                                    document.subOptions = { frequency: frequencyChoice };
                                    //implement conflict checking
                                    document.getElementById("calendar").style.display = "flex";
                                    // document.getElementById("label").style.position = "unset";
                                    document.getElementById("main").style.flexDirection = "unset";
                                    let buttons = document.getElementById("buttons").children;
                                    Array.from(buttons).forEach((button) => {
                                        if (button.id !== frequencyChoice) {
                                            button.style.display = "none";
                                        }
                                    });
                                    document.getElementById("label").innerText = "What Day?"
                                    // history.pushState({ page: "calendaropened", busyHours: hoursBusy }, "", "");
                                    hoursAvailable = filterByFrequency(frequencyChoice);
                                }
                            </script>
                        </div>
                        <div id="hoursWrapper" style="display:none">
                            <button id="hours" class="buttonAdapt">

                            </button>
                        </div>
                </div>
            </div>
            <div class="navButtonContainer">
                <button style="
    border-color: rgba(255, 0, 208, 0.87);
    color: rgba(255, 0, 208, 0.87);
" class="buttonAdapt navButton">Back</button>
                <button style="
                color:white;
    background-color: rgba(255, 0, 208, 0.87);
" class="buttonAdapt navButton">Continue</button>
            </div>
        </div>
    </div>
    <script type='text/javascript' src='./calendar.js'></script>
    <script>
        history.pushState({ page: "original" }, "", "")
    </script>
    <script type='text/javascript' src='./state.js'></script>
</body>

</html>